<div class="row">
  <div class="columns large-12">
    <h4>Therapeutic context</h4>
    <p>
      <span ng-if="problem.description">{{::problem.description}}</span>
      <span ng-if="!problem.description">No description given.</span>
    </p>

    <h4>Alternatives</h4>
    <ul>
      <li ng-repeat="alternative in problem.alternatives">{{::alternative.title}}</li>
    </ul>

    <h4>Effects Table</h4>
    <h6>Show alternatives</h6>
          <div>
        <button ng-if="editMode.isUserOwner" class="tiny" ng-click="selectAllAlternatives()">Select all</button>
        <button ng-if="editMode.isUserOwner" class="tiny" ng-click="deselectAllAlternatives()">Deselect all</button>
      </div>
    <form>
      <label ng-repeat="(alternativeKey, alternative) in problem.alternatives" class="check2hide">
        <input ng-disabled="!editMode.isUserOwner" class="check2hide" type="checkbox" ng-model="alternativeInclusions[alternativeKey]"
          ng-change="toggleVisibility()"> {{alternative.title}}
      </label>
    </form>

    <table data-mode="columntoggle" class="full-width effects-table">
      <thead>
        <tr>
          <th>Criterion</th>
          <th>Description</th>
          <th>Units</th>
          <th class="text-center" ng-repeat="(alternativeKey, alternative) in problem.alternatives"
            ng-show="alternativeInclusions[alternativeKey]">{{alternative.title}}{{problem.valueTree.children.children[0].criteria}}</th>
        </tr>
      </thead>
      <tbody class="main">
        <tr ng-repeat-start="effectsTableRow in effectsTableData" ng-show="effectsTableRow.path.length > 0">
          <td class="group-header" colspan="{{3 + nrAlternatives}}">
            <div class="main-header">
              {{effectsTableRow.path[0].title}}</div>
            <span ng-repeat="node in effectsTableRow.path.slice(1)">
              <i style="font-size: 1.5rem" class="fa fa-angle-right"></i>
              <div class="secondary-header">
                {{node.title}}
              </div>
            </span>
          </td>
        </tr>
        <tr class="showmore" ng-repeat-end ng-repeat="criterion in effectsTableRow.criteria track by $index">
          <td>
            <a dropdown-toggle="#dropdown-{{$index}}" class="tiny-icon"><i class="fa fa-list"></i></a>            {{criterion.value.title}}
            <div id="dropdown-{{$index}}" class="f-dropdown details">
              <table cellspacing="0px" class="no-border">
                <thead>
                  <tr>
                    <th scope="col">Alternative</th>
                    <th scope="col">{{criterion.value.unitOfMeasurement}}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="(alternativeKey, alternative) in problem.alternatives">
                    <td>{{alternative.title}}</td>
                    <td>
                      {{scales[criterion.key][alternativeKey]['50%'] | number}}
                      <span ng-show="!isExact(criterion.key, alternativeKey)">
                        ({{scales[criterion.key][alternativeKey]['2.5%'] | number}}, {{scales[criterion.key][alternativeKey]['97.5%']
                        | number}})
                      </span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

          </td>
          <td>
            <div class="td-container">
              <div class="td-content">{{criterion.value.description}}</div>
              <div class="td-spacer">{{criterion.value.description}}</div>
              <span>&nbsp;</span>
            </div>


          </td>
          <td>{{criterion.value.unitOfMeasurement}}</td>
          <td class="text-center" ng-repeat="(alternativeKey, alternative) in problem.alternatives"
            name="col{{$index}}" id="col{{$index}}" ng-show="alternativeInclusions[alternativeKey]">
            {{scales[criterion.key][alternativeKey]['50%'] | number}}
            <br>
            <div class="uncertain" ng-show="!isExact(criterion.key, alternativeKey)">
              {{scales[criterion.key][alternativeKey]['2.5%'] | number}}, {{scales[criterion.key][alternativeKey]['97.5%']
              | number}}</div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
