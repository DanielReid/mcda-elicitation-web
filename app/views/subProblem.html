<div class="grid-x">
  <div class="cell">
    <span>Problem:</span>
    <select class="scenario-select" ng-model="subProblem" ng-options="subProblem.title for subProblem in subProblems track by subProblem.id" ng-change="subProblemChanged(subProblem)"></select>
    <inline-help help-key="problem"></inline-help>
    <a ng-if="editMode.isUserOwner" ng-click="editSubProblemTitle()" tooltip="Edit current problem title"><i class="fa fa-edit"></i></a>
    <a ng-if="editMode.isUserOwner" ng-click="openCreateDialog()" tooltip="Create new problem"><i class="fa fa-plus"></i></a>
  </div>
</div>
<br>
<div class="grid-x underlined-div">
  <div class="cell">
    <effects-table criteria="criteria" alternatives="alternatives" value-tree="problem.valueTree" edit-mode="editMode" effects-table-info="effectsTableInfo" scales="scales.observed" is-stand-alone="isStandAlone"></effects-table>
  </div>
</div>
<div class="grid-x">
  <div class="cell large-10">
    <h4>Scale Ranges
      <inline-help help-key="scale-ranges"></inline-help>
    </h4>
  </div>
  <div class="cell large-2">
    <button data-ng-if="!areTooManyDataSourcesIncluded" class="button small info clipboard-button" data-clipboard-target="#scalestable">
      <i class="fa fa-clipboard"></i> Copy to clipboard
    </button>
  </div>
  <div class="cell error">
    Multiple data sources selected for at least one criterion, therefore no scales can be set.
  </div>
  <div class="cell" ng-if="!areTooManyDataSourcesIncluded">
    <table class="full-width" id="scalestable">
      <thead>
        <tr>
          <th>Criterion
            <inline-help help-key="criterion"></inline-help>
          </th>
          <th>Theoretical Range
            <inline-help help-key="theoretical-range"></inline-help>
          </th>
          <th>Observed Range
            <inline-help help-key="observed-range"></inline-help>
          </th>
          <th>Configured Range
            <inline-help help-key="configured-range"></inline-help>
          </th>
          <th>Units
            <inline-help help-key="criterion-unit"></inline-help>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="criterion in criteria">
          <td>{{criterion.title}}</td>
          <td>{{scales.theoreticalScales[criterion.id][0] | number}}, {{scales.theoreticalScales[criterion.id][1] | number}}</td>
          <td>
            <span ng-bind="intervalHull(scales.observed[criterion.id])[0] | number"></span> ,
            <span ng-bind="intervalHull(scales.observed[criterion.id])[1] | number"></span>
          </td>
          <td>
            <span ng-if="criterion.pvf.range">{{criterion.pvf.range[0] | number}}, {{criterion.pvf.range[1] | number}}</span>
            <span ng-if="!criterion.pvf.range">
              <span ng-bind="intervalHull(scales.observed[criterion.id])[0] | number"></span> ,
            <span ng-bind="intervalHull(scales.observed[criterion.id])[1] | number"></span>
            </span>
          </td>
          <td>{{criterion.unitOfMeasurement}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
