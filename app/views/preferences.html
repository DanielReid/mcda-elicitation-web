<div class="grid-x">
  <div class="cell">
    <span>Scenario:</span>
    <select class="scenario-select" ng-model="scenario" ng-options="scenario.title for scenario in scenarios track by scenario.id" ng-change="scenarioChanged(scenario)"></select>
    <inline-help help-key="scenario"></inline-help>
    <a ng-if="editMode.isUserOwner" ng-click="editScenarioTitle()" tooltip="Edit current scenario title"><i class="fa fa-edit"></i></a>
    <a ng-if="editMode.isUserOwner" ng-click="newScenario()" tooltip="Create clean scenario"><i class="fa fa-plus"></i></a>
    <a ng-if="editMode.isUserOwner" ng-click="forkScenario()" tooltip="Copy current scenario"><i class="fa fa-copy"></i></a>
  </div>
</div>
<br>
<div id="partial-value-functions-block" class="prefs-block">
  <h4>Partial Value Functions <inline-help help-key="partial-value-function"></inline-help></h4>
  <div id="partial-value-functions" class="grid-x grid-padding-x small-up-1 medium-up-2 large-up-3">
    <div class="cell" ng-repeat="criterion in aggregateState.problem.criteria">
      <h5>{{::criterion.title}}</h5>
      <div style="width: 250px; height: 180px">
        <line-chart ng-if="isPVFDefined(criterion)" value="getXY(criterion)" show-legend="false"></line-chart>
        <div ng-if="!isPVFDefined(criterion)" style="padding-top: 40px; text-align: center; margin: 0">
          <i style="font-size: 100px" class="fa fa-question"></i>
        </div>
      </div>
      <button class="button" ng-if="editMode.isUserOwner" ng-class="{alert: !isSafe['partial-value-function'].safe}" tooltip="{{isSafe['partial-value-function'].tooltip}}" tooltip-animation="false" ng-disabled="!isAccessible(tasks['partial-value-function']).accessible" ui-sref="partial-value-function({criterion: criterion.id})">Define partial value function</button>
    </div>
  </div>
</div>
<div class="grid-x prefs-block" id="trade-off-block">
  <div class="cell">
    <h4>
      Weights <inline-help help-key="trade-offs"></inline-help>
    </h4>
  </div>
  <div class="cell">
    <h5>
      Elicitation
    </h5>
  </div>
  <div class="cell">
    <button class="button" ui-sref="swing-weighting" tooltip-animation="false" ng-disabled="!isAccessible(tasks['swing-weighting']).accessible" ng-class="{alert: !isSafe['swing-weighting'].safe}" tooltip="{{isSafe['swing-weighting'].tooltip}}">
      Swing Weighting
    </button>
  </div>
  <div class="cell large-4 button-group" ng-if="editMode.isUserOwner">
    <button class="button" ui-sref="ordinal-swing" tooltip-animation="false" ng-disabled="!isAccessible(tasks['ordinal-swing']).accessible" ng-class="{alert: !isSafe['ordinal-swing'].safe}" tooltip="{{isSafe['ordinal-swing'].tooltip}}">
      Ranking
    </button>
    <button class="button" ui-sref="exact-swing" tooltip-animation="false" ng-disabled="!isAccessible(tasks['exact-swing']).accessible" ng-class="{alert: !isSafe['exact-swing'].safe}" tooltip="{{isSafe['exact-swing'].tooltip}}">
      Exact Matching
    </button>
    <button class="button" ui-sref="interval-swing" tooltip-animation="false" ng-disabled="!isAccessible(tasks['interval-swing']).accessible" ng-class="{alert: !isSafe['interval-swing'].safe}" tooltip="{{isSafe['interval-swing'].tooltip}}">
      Imprecise Matching
    </button>
  </div>
  <div class="cell alert" ng-if="!deterministicResults">Trade-offs cannot be specified if there are criteria with missings PVFs.</div>
  <div class="cell">
    <h5>Constraints</h5>
  </div>
  <div class="cell">
    <trade-offs problem="aggregateState.problem" preferences="scenario.state.prefs"></trade-offs>
  </div>
  <div class="cell large-9">
    <h5>Representative weights <inline-help help-key="representative-weights"></inline-help></h5>
  </div>
  <div class="cell large-3" ng-if="deterministicResults">
    <button class="button small info clipboard-button" data-clipboard-target="#weighttable">
      <i class="fa fa-clipboard"></i> Copy to clipboard
    </button>
  </div>
  <div class="cell" ng-if="deterministicResults">
    <table id="weighttable">
      <thead>
        <th ng-repeat="criterion in aggregateState.problem.criteria">{{criterion.title}}</th>
      </thead>
      <tbody>
        <tr>
          <td ng-repeat="criterion in aggregateState.problem.criteria">{{deterministicResults.weights.data[criterion.id] | number}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="cell alert" ng-if="!deterministicResults">
    Weights cannot be shown if there are criteria with missing PVFs.
  </div>
</div>